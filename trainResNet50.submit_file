####################
#
# Example Job for HTCondor
#
####################

#---------------------------------------------
# Name your batch so it's easy to distinguish in condor_q.
JobBatchName = "Train-ResNet50"

# --------------------------------------------
# Executable
executable   = /mnt/fast/nobackup/users/nt00601/miniconda3/bin/python

# ---------------------------------------------------
# Universe (vanilla, docker)
universe     = docker
docker_image = nvidia/cuda:11.8.0-cudnn8-runtime-ubuntu22.04

# -------------------------------------------------
# Event, out and error logs
output = c$(cluster).p$(process).out
error  = c$(cluster).p$(process).error

# --------------------------------------
# Resources
request_GPUs 	= 4
+GPUMem 	= 24000
request_CPUs   	= 1
request_memory 	= 15G

#This job will complete in less than 1 hour
+JobRunTime = 1

#This job can checkpoint
+CanCheckpoint = true

# Request for guaranteed run time(measured in s to match epoch runtime). 0 mean job is happy to checkpoint and move at any time.
# This lets Condor remove our job ASAP if a machine needs rebooting. Useful when we can checkpoint and restore
MaxJobRetirementTime = 0

# -----------------------------------
arguments = $(script) -i $(path) -p 10

script = $ENV(PWD)/nnunet/experiment_planning/nnUNet_convert_decathlon_task.py
path = /mnt/fast/nobackup/users/nt00601/Task05_Prostate
queue 1


